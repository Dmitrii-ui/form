(function(e){function t(t){for(var r,o,u=t[0],c=t[1],s=t[2],p=0,d=[];p<u.length;p++)o=u[p],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&d.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(t);while(d.length)d.shift()();return i.push.apply(i,s||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,u=1;u<n.length;u++){var c=n[u];0!==a[c]&&(r=!1)}r&&(i.splice(t--,1),e=o(o.s=n[0]))}return e}var r={},a={app:0},i=[];function o(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(n,r,function(t){return e[t]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var u=window["webpackJsonp"]=window["webpackJsonp"]||[],c=u.push.bind(u);u.push=t,u=u.slice();for(var s=0;s<u.length;s++)t(u[s]);var l=c;i.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},3656:function(e,t,n){"use strict";n("c629")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("7a23"),a={class:"container"};function i(e,t,n,i,o,u){var c=Object(r["h"])("the-form");return Object(r["f"])(),Object(r["c"])("div",a,[Object(r["e"])(c)])}var o={action:"#",class:"form"},u={key:0,class:"modal"},c={class:"modal-container"},s=Object(r["e"])("p",{class:"modal-info"},"Клиент успешно создан!",-1),l={class:"btn-wrapper"};function p(e,t,n,a,i,p){var d=Object(r["h"])("form-step");return Object(r["f"])(),Object(r["c"])("form",o,[i.isCompleted?(Object(r["f"])(),Object(r["c"])("div",u,[Object(r["e"])("div",c,[s,Object(r["e"])("button",{onClick:t[1]||(t[1]=function(){return p.reset&&p.reset.apply(p,arguments)}),class:"btn btn-success"},"Закрыть")])])):Object(r["d"])("",!0),Object(r["e"])(d,{step:i.step,form:i.forms[i.step],steps:i.forms.length,onInputChange:p.setInputValue,onInputMultipleChange:p.setMultipleValue},null,8,["step","form","steps","onInputChange","onInputMultipleChange"]),Object(r["e"])("div",l,[Object(r["e"])("button",{class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return p.prev&&p.prev.apply(p,arguments)})},"Назад"),p.isFormEnd?(Object(r["f"])(),Object(r["c"])("button",{key:0,class:"btn btn-success",onClick:t[3]||(t[3]=function(){return p.complete&&p.complete.apply(p,arguments)})},"Создать")):(Object(r["f"])(),Object(r["c"])("button",{key:1,class:"btn btn-success",onClick:t[4]||(t[4]=function(){return p.next&&p.next.apply(p,arguments)})},"Вперед"))])])}n("c740"),n("a434"),n("159b");var d={class:"form__title"},f={class:"form-step mb-3"};function m(e,t,n,a,i,o){return Object(r["f"])(),Object(r["c"])(r["a"],null,[Object(r["e"])("h2",d,Object(r["j"])(n.form.title),1),Object(r["e"])("p",f,"Заполняется "+Object(r["j"])(n.step+1)+" из "+Object(r["j"])(n.steps),1),(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["g"])(n.form.inputs,(function(e,t){return Object(r["f"])(),Object(r["c"])(Object(r["i"])(e.componentName),{key:e.data.label,formTouched:n.form.touched,input:e.data,index:t,onInputChange:o.onInputChange,onInputMultipleChange:o.onMultipleChange},null,8,["formTouched","input","index","onInputChange","onInputMultipleChange"])})),128))],64)}n("a9e3");var b={class:"form__group"},v={class:"label"},h={class:"label__text"};function j(e,t,n,a,i,o){return Object(r["f"])(),Object(r["c"])("div",b,[Object(r["e"])("label",v,[Object(r["e"])("input",{class:"form__input",type:"text",value:n.input.value,required:"",onInput:t[1]||(t[1]=function(){return o.onInput&&o.onInput.apply(o,arguments)}),onInvalid:t[2]||(t[2]=Object(r["m"])((function(){}),["prevent"]))},null,40,["value"]),Object(r["e"])("div",h,Object(r["j"])(n.input.label),1),o.isErrors?(Object(r["f"])(!0),Object(r["c"])(r["a"],{key:0},Object(r["g"])(n.input.errors,(function(e){return Object(r["f"])(),Object(r["c"])("p",{class:"validation-error",key:e},Object(r["j"])(e),1)})),128)):Object(r["d"])("",!0)])])}var O={emits:["input-change"],props:{index:{type:Number,required:!0},input:{type:Object,required:!0},formTouched:{type:Boolean,required:!0}},computed:{isErrors:function(){return this.input.errors&&this.input.errors.length>0&&this.formTouched}},methods:{onInput:function(e){this.$emit("input-change",{value:e.target.value,idx:this.index})}}};O.render=j;var y=O,g={class:"form__group mt-6"},x={class:"label__text"};function I(e,t,n,a,i,o){return Object(r["f"])(),Object(r["c"])("div",g,[Object(r["e"])("label",{class:"label",for:n.input.id},[Object(r["e"])("div",x,Object(r["j"])(n.input.label),1)],8,["for"]),Object(r["e"])("input",{class:"checkbox",id:n.input.id,type:"checkbox",value:n.input.value,onInput:t[1]||(t[1]=function(){return o.onInput&&o.onInput.apply(o,arguments)})},null,40,["id","value"])])}var _={emits:["input-change"],props:{index:{type:Number,required:!0},input:{type:Object,required:!0}},methods:{onInput:function(e){this.$emit("input-change",{value:!this.input.value,idx:this.index})}}};_.render=I;var k=_,N=(n("b0c0"),{class:"form__group"}),q={class:"form__info"};function w(e,t,n,a,i,o){return Object(r["f"])(),Object(r["c"])("div",N,[Object(r["e"])("p",q,Object(r["j"])(n.input.label),1),(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["g"])(n.input.radios,(function(e,a){return Object(r["f"])(),Object(r["c"])(r["a"],{key:e},[Object(r["e"])("label",{class:"form__label",for:n.input.ids[a]},Object(r["j"])(e),9,["for"]),Object(r["e"])("input",{class:"form__input radio",id:n.input.ids[a],name:n.input.name,type:"radio",value:e,onInput:t[1]||(t[1]=function(){return o.onInput&&o.onInput.apply(o,arguments)})},null,40,["id","name","value"])],64)})),128))])}var C={emits:["input-change"],props:{index:{type:Number,required:!0},input:{type:Object,required:!0}},methods:{onInput:function(e){this.$emit("input-change",{value:e.target.value,idx:this.index})}}};C.render=w;var P=C,M={class:"form__group"},S={class:"select-wrapper mt-6"},E=Object(r["e"])("div",{class:"label__text"},"Группа клиентов",-1),T={key:1,class:"selected-info"};function $(e,t,n,a,i,o){return Object(r["f"])(),Object(r["c"])("div",M,[Object(r["e"])("div",S,[o.isErrors?(Object(r["f"])(!0),Object(r["c"])(r["a"],{key:0},Object(r["g"])(n.input.errors,(function(e){return Object(r["f"])(),Object(r["c"])("p",{class:"validation-error",key:e},Object(r["j"])(e),1)})),128)):Object(r["d"])("",!0),Object(r["e"])("label",{class:"label",for:n.input.id},[E,Object(r["e"])("div",{class:"selected-items",onClick:t[2]||(t[2]=Object(r["m"])((function(){return o.show&&o.show.apply(o,arguments)}),["prevent"]))},[n.input.value.length>0?(Object(r["f"])(!0),Object(r["c"])(r["a"],{key:0},Object(r["g"])(n.input.value,(function(e){return Object(r["f"])(),Object(r["c"])("div",{class:"selected-item",key:e},Object(r["j"])(e),1)})),128)):(Object(r["f"])(),Object(r["c"])("p",T,"Ничего не выбрано")),Object(r["e"])("p",{class:"close",onClick:t[1]||(t[1]=Object(r["m"])((function(){return o.close&&o.close.apply(o,arguments)}),["prevent","stop"]))},"✖")])],8,["for"]),Object(r["l"])(Object(r["e"])("select",{id:n.input.id,class:"select",size:n.input.options.length,multiple:"",value:n.input.value,onClick:t[3]||(t[3]=Object(r["m"])((function(){return o.onInput&&o.onInput.apply(o,arguments)}),["prevent"]))},[(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["g"])(n.input.options,(function(e){return Object(r["f"])(),Object(r["c"])("option",{class:"select__option",key:e,value:e},Object(r["j"])(e),9,["value"])})),128))],8,["id","size","value"]),[[r["k"],i.isShow]])])])}var F={data:function(){return{isShow:!1}},emits:["input-multiple-change"],props:{index:{type:Number,required:!0},input:{type:Object,required:!0},formTouched:{type:Boolean,required:!0}},computed:{isErrors:function(){return this.input.errors&&this.input.errors.length>0&&this.formTouched}},methods:{onInput:function(e){e.target.value&&(this.show(),this.$emit("input-multiple-change",{value:e.target.value,idx:this.index,key:e.ctrlKey}))},show:function(){this.isShow=!0},close:function(){this.isShow=!1}}};F.render=$;var L=F,V={class:"form__group"},z={class:"select-wrapper mt-6"},B={class:"label__text"};function J(e,t,n,a,i,o){return Object(r["f"])(),Object(r["c"])("div",V,[Object(r["e"])("div",z,[Object(r["e"])("label",{class:"label",for:n.input.id},[Object(r["e"])("div",B,Object(r["j"])(n.input.label),1)],8,["for"]),o.isErrors?(Object(r["f"])(!0),Object(r["c"])(r["a"],{key:0},Object(r["g"])(n.input.errors,(function(e){return Object(r["f"])(),Object(r["c"])("p",{class:"validation-error",key:e},Object(r["j"])(e),1)})),128)):Object(r["d"])("",!0),Object(r["e"])("select",{id:n.input.id,class:"select",value:n.input.value,onClick:t[1]||(t[1]=Object(r["m"])((function(){return o.onInput&&o.onInput.apply(o,arguments)}),["prevent"]))},[(Object(r["f"])(!0),Object(r["c"])(r["a"],null,Object(r["g"])(n.input.options,(function(e){return Object(r["f"])(),Object(r["c"])("option",{class:"select__option",key:e,value:e},Object(r["j"])(e),9,["value"])})),128))],8,["id","value"])])])}var A={emits:["input-change"],props:{index:{type:Number,required:!0},input:{type:Object,required:!0},formTouched:{type:Boolean,required:!0}},computed:{isErrors:function(){return this.input.errors&&this.input.errors.length>0&&this.formTouched}},methods:{onInput:function(e){e.target.value&&this.$emit("input-change",{value:e.target.value,idx:this.index})}}};A.render=J;var K=A,R={emits:["input-change","input-multiple-change"],props:{form:{type:Object,required:!0},step:{type:Number,required:!0},steps:{type:Number,required:!0}},methods:{onInputChange:function(e){var t=e.value,n=e.idx;this.$emit("input-change",{value:t,idx:n,step:this.step})},onMultipleChange:function(e){var t=e.value,n=e.idx,r=e.key;this.$emit("input-multiple-change",{value:t,idx:n,step:this.step,key:r})}},components:{FormInput:y,FormCheckbox:k,FormRadio:P,FormSelect:K,FormSelectMultiple:L}};R.render=m;var D=R,G={datePattern:[/^[\d]{2}([:]|[-])[\d]{2}([:]|[-])[\d]{4}$/,"дд:мм:гггг или дд-мм-гггг"],stringPattern:[/^[A-zА-я]{0,}$/,"только символы букв"],telPattern:[/^7[0-9]{3}-[0-9]{3}-[0-9]{4}$/,"11 цифр, начинаться с 7. Пример: 7927-600-1234"]},H=function(e){var t=!0;return e.forEach((function(e){e.data.hasOwnProperty("valid")&&(t=t&&e.data.valid)})),t},Q=(n("caad"),n("2532"),function(e){if(e.hasOwnProperty("validators")){if(e.validators.required)if(e.value.length>0){var t=e.errors.findIndex((function(e){return"Поле не может быть пустым!"===e}));-1!==t&&e.errors.splice(t,1)}else!e.errors.includes("Поле не может быть пустым!")&&e.errors.push("Поле не может быть пустым!");if(e.validators.maxLength)if(e.value.length>e.validators.maxLength)!e.errors.includes("Символов должно быть меньше "+e.validators.maxLength)&&e.errors.push("Символов должно быть меньше "+e.validators.maxLength);else{var n=e.errors.findIndex((function(t){return t==="Символов должно быть меньше "+e.validators.maxLength}));-1!==n&&e.errors.splice(n,1)}if(e.validators.pattern)if(e.validators.pattern[0].test(e.value)){var r=e.errors.findIndex((function(t){return t==="Формат должен быть в виде: "+e.validators.pattern[1]}));-1!==r&&e.errors.splice(r,1)}else!e.errors.includes("Формат должен быть в виде: "+e.validators.pattern[1])&&e.errors.push("Формат должен быть в виде: "+e.validators.pattern[1]);if(e.validators.requiredMultiple)if(e.value.length>0){var a=e.errors.findIndex((function(e){return"Выберите хотя бы одну опцию"===e}));-1!==a&&e.errors.splice(a,1)}else!e.errors.includes("Выберите хотя бы одну опцию")&&e.errors.push("Выберите хотя бы одну опцию");e.errors.length>0?e.valid=!1:e.valid=!0}}),U=function(e){e.forEach((function(e){e.touched=!1,e.inputs.forEach((function(e){"form-checkbox"===e.componentName?e.data.value=!1:"form-select-multiple"===e.componentName?e.data.value=[]:e.data.value="",e.data.hasOwnProperty("valid")&&(e.data.valid=!1,e.data.errors=[])}))}))},W={data:function(){return{step:0,isCompleted:!1,forms:[{touched:!1,title:"Данные клиента",inputs:[{componentName:"form-input",data:{type:"text",label:"Фамилия",value:"",valid:!1,errors:[],validators:{required:!0,maxLength:24,pattern:G.stringPattern}}},{componentName:"form-input",data:{type:"text",label:"Имя",value:"",valid:!1,errors:[],validators:{required:!0,maxLength:24,pattern:G.stringPattern}}},{componentName:"form-input",data:{type:"text",label:"Отчество",value:""}},{componentName:"form-input",data:{type:"text",label:"Дата рождения",value:"",valid:!1,errors:[],validators:{required:!0,pattern:G.datePattern}}},{componentName:"form-input",data:{type:"tel",label:"Номер телефона",value:"",valid:!1,errors:[],validators:{required:!0,pattern:G.telPattern}}},{componentName:"form-radio",data:{label:"Ваш пол",name:"gender",radios:["Мужской","Женский"],ids:["man","woman"],value:"Мужской"}},{componentName:"form-select-multiple",data:{label:"Группа клиентов",id:"client-group",multiple:!0,options:["VIP","Проблемные","ОМС"],value:[],valid:!1,errors:[],validators:{requiredMultiple:!0}}},{componentName:"form-select",data:{label:"Лечащий врач",id:"doctor",multiple:!1,options:["Иванов","Захаров","Чернышева"],value:"Иванов"}},{componentName:"form-checkbox",data:{label:"Не отправлять СМС",id:"SMS",value:!1}}]},{touched:!1,title:"Адрес",inputs:[{componentName:"form-input",data:{type:"text",label:"Индекс",value:""}},{componentName:"form-input",data:{type:"text",label:"Страна",value:""}},{componentName:"form-input",data:{type:"text",label:"Область",value:""}},{componentName:"form-input",data:{type:"text",label:"Город",value:"",valid:!1,errors:[],validators:{required:!0}}},{componentName:"form-input",data:{type:"text",label:"Улица",value:""}},{componentName:"form-input",data:{type:"text",label:"Дом",value:""}}]},{touched:!1,title:"Адрес",inputs:[{componentName:"form-select",data:{label:"Тип документа",id:"document",multiple:!1,options:["Паспорт","Свидетельство о рождении","Вод. удостоверение"],value:"Паспорт",valid:!1,errors:[],validators:{required:!0}}},{componentName:"form-input",data:{type:"text",label:"Серия",value:""}},{componentName:"form-input",data:{type:"text",label:"Номер",value:""}},{componentName:"form-input",data:{type:"text",label:"Кем выдан",value:""}},{componentName:"form-input",data:{type:"text",label:"Дата выдачи",value:"",valid:!1,errors:[],validators:{required:!0,pattern:G.datePattern}}}]}]}},methods:{setInputValue:function(e){var t=e.value,n=e.idx,r=e.step;this.forms[r].inputs[n].data.value=t,Q(this.forms[r].inputs[n].data)},setMultipleValue:function(e){var t=e.value,n=e.idx,r=e.step,a=e.key;if(a){var i=this.forms[r].inputs[n].data.value.findIndex((function(e){return e===t}));-1===i?(this.forms[r].inputs[n].data.value.push(t),Q(this.forms[r].inputs[n].data)):(this.forms[r].inputs[n].data.value.splice(i,1),Q(this.forms[r].inputs[n].data))}else this.forms[r].inputs[n].data.value=[t],Q(this.forms[r].inputs[n].data)},next:function(){this.forms[this.step].inputs.forEach((function(e){Q(e.data)}));var e=H(this.forms[this.step].inputs);this.forms[this.step].touched=!0,e&&this.step<this.forms.length-1&&this.step++},prev:function(){0!==this.step&&this.step--},complete:function(){this.forms[this.step].inputs.forEach((function(e){Q(e.data)})),this.forms[this.step].touched=!0,H(this.forms[this.step].inputs)&&(this.isCompleted=!0,document.body.classList.add("modal-active"))},reset:function(){this.isCompleted=!1,this.step=0,U(this.forms),document.body.classList.remove("modal-active")}},computed:{isFormEnd:function(){return this.step===this.forms.length-1}},components:{FormStep:D}};n("da83");W.render=p;var X=W,Y={components:{TheForm:X}};n("3656");Y.render=i;var Z=Y,ee=Object(r["b"])(Z);ee.config.devtools=!0,ee.mount("#app")},"7ee7":function(e,t,n){},c629:function(e,t,n){},da83:function(e,t,n){"use strict";n("7ee7")}});
//# sourceMappingURL=app.d84608ef.js.map